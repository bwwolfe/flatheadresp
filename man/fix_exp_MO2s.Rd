% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/fix_exp_MO2s.R
\name{fix_exp_mo2s}
\alias{fix_exp_mo2s}
\title{Fix \eqn{MO_{2}}  values for experimental chambers based on corrected fish masses and densities}
\usage{
fix_exp_mo2s(
  path = NULL,
  mo2_data = NULL,
  metadata = NULL,
  new_masses = NULL,
  new_densities = 1,
  mo2_col = "MO2",
  chamber_col = "chamber",
  mass_col = "Mass.of.fish..kg",
  vresp_col = "Volume.respirometer..L",
  keep_original = TRUE,
  uncorrected = FALSE,
  calc_report = FALSE
)
}
\arguments{
\item{path}{Character string. Path to experiment directory. If provided, overrides
\code{mo2_data} and \code{metadata}.}

\item{mo2_data}{Data frame of \eqn{MO_{2}}  values (from \code{calc_exp_mo2s()} or \code{get_exp_mo2s()}).
Required if \code{path} is \code{NULL}.}

\item{metadata}{Data frame of chamber metadata. Required if \code{path} is \code{NULL}.}

\item{new_masses}{Numeric vector or list of new fish masses (kg). Can be named
by chamber ID (e.g., \code{list("1" = 0.345)}) or unnamed (order corresponds to chambers).
Use \code{NA} for chambers that should not be changed.}

\item{new_densities}{Numeric scalar or vector of fish densities (kg/L). Same naming rules
as \code{new_masses}. Defaults to \code{1.0}.}

\item{mo2_col}{Column name for \eqn{MO_{2}}  values in \code{mo2_data}. Default \code{"MO2"}.}

\item{chamber_col}{Column name for chamber IDs. Default \code{"chamber"}.}

\item{mass_col}{Column name in metadata for original fish mass (kg).}

\item{vresp_col}{Column name in metadata for respirometer volume (L).}

\item{keep_original}{Logical. If \code{TRUE}, preserves original \eqn{MO_{2}} values in a new
column (\code{MO2_orig}). Default \code{TRUE}.}

\item{uncorrected}{Logical. If \code{TRUE}, loads \eqn{MO_{2}}  data using \code{get_exp_mo2s()}
instead of \code{calc_exp_mo2s()}. Default \code{FALSE}.}

\item{calc_report}{Logical. If \code{TRUE}, will print the \code{calc_cycle_mo2s()} summary to
console. Default \code{FALSE}.}
}
\value{
A data frame identical to \code{calc_exp_mo2s()} output but with corrected \eqn{MO_{2}}  values.
}
\description{
Adjusts mass-specific \eqn{MO_{2}} values in experiment data by recalculating based on
corrected fish masses and/or densities. Can operate on data loaded from an
experiment directory (\code{path}) or on user-supplied data frames.
}
\details{
If \code{path} is provided, metadata and \eqn{MO_{2}}  data are automatically loaded using
\code{get_exp_metadata()} and either \code{calc_exp_mo2s()} or \code{get_exp_mo2s()} depending
on \code{uncorrected}. If \code{path} is \code{NULL}, both \code{mo2_data} and \code{metadata} must be
supplied. Chambers can be selectively updated by providing \code{NA} for unchanged
masses or densities.
}
\examples{
# Example using system file from package
exp_dir_path <- system.file("extdata", "aquaresp_experiment", package = "flatheadresp")
corrected <- fix_exp_mo2s(path = exp_dir_path,
                          new_masses = c("1" = 0.345, "3" = 0.512),
                          new_densities = 1.02)

}
